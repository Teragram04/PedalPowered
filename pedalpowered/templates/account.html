{% extends "layout.html" %}

{% block content %}
    <div class = 'content-section'>
        <div class = 'media'>
            <img class = 'rounded-circle account-img' src="{{image_file}}">
            <div class = 'media-body'>
                <h2 class = 'account-heading' style="color:#E7BB3E; font-family:'Irish Grover';">{{current_user.username}}</h2>
                <p class = 'text-secondary' style="color:#CE702C !important; font-family:'Irish Grover';">{{current_user.email}}</p>
                <a href="{{ url_for('friend_list') }}" class="btn btn-primary btn-sm" >View My Friends</a>
            </div>
        </div>
    </div>

        <!--Insert forms within content section-->
        <div class = "content-section">

            <form method = "POST" action = "" enctype="multipart/form-data">
                {{ form.hidden_tag() }}

                <fieldset class="form-group">

                    <!--Create the body of the form-->
                    <legend class="border-bottom mb-4" style="color:#E7BB3E; font-family:'Irish Grover';">Update info</legend>
                    <div class="form-group">

                        <!--Create username field. Repeats for email and password-->
                        {{form.username.label(class="form-control-label")}}
                        <!--Print any errors-->
                        {% if form.username.errors %}

                            {{form.username(class="form-control form-control-lg is-invalid")}}

                                <div class="invalid-feedback">
                                    {% for error in form.username.errors %}
                                        <span>{{error}}</span>
                                    {% endfor %}
                                </div>
                        {% else %}
                            {{form.username(class="form-control form-control-lg")}}
                        {% endif %}
                        <!--DONE PRINTING ERRORS-->
                    </div>

                    <!--Create Email field-->
                    <div class="form-group">
                        {{form.email.label(class="form-control-label")}}
                        {% if form.email.errors %}

                            {{form.email(class="form-control form-control-lg is-invalid")}}

                                <div class="invalid-feedback">
                                    {% for error in form.email.errors %}
                                        <span>{{error}}</span>
                                    {% endfor %}
                                </div>
                        {% else %}
                            {{form.email(class="form-control form-control-lg")}}
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {{form.picture.label()}}
                        {{form.picture(class = "form-control-file")}}
                        {% if form.picture.errors %}
                            {% for error in form.picture.errors %}
                                <span class="text-danger">{{error}}</span>
                            {% endfor %}
                        {% endif %}
                    </div>
                </fieldset>
                <div class="form-group">
                    {{form.submit_registration(class="btn btn-primary")}}
                </div>
            </form>
        </div>
{% endblock content %}
